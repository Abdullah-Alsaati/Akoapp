{{ 'custom_product_grid.css' |  asset_url |  stylesheet_tag }}

<div class="collection-products-wrapper">
  <div class="collection-products">
        
          {% for product in collection.products %}
            <div class="product-card">
              <div class="product-image"><img width="100%" height="100%" src="{{ product.featured_image |  image_url }}" alt="" loading="lazy"></div>
              <div class="product-information">
                <p class="product-title">
                  {{ product.title | truncatewords: 10 }}
                </p>

                <div class="product-prices">
                  <p class="product-price">{{ product.price |  money }}</p>
                  {% if product.compare_at_price %}
                    <p class="product-compare-to-price" style="text-decoration: line-through;">{{ product.compare_at_price | money }}</p>
                  {% endif %}
                </div>
              </div>
              <div class="buttons">
                <form class="buttons" method="post" action="/cart/add">
                  <input type="hidden" name="id" value="{{ product.variants.first.id }}">
                  <input type="hidden" name="quantity" value="1">
                  <button type="submit" class="buy-now-button">شراء الاٌن</button>
                  <button type="submit" class="add-to-cart-button"><img width="auto" height="100%"  src="{{ 'cart.svg' |  asset_url  }}" alt=""></button>
                </form>
              </div>
            </div>
          {% endfor %}

    </div>
  </div>


  <script>

document.querySelectorAll(".buy-now-button").forEach(button => {
    button.addEventListener("click", function (event) {
      event.preventDefault();
      let form = event.target.closest("form");

      fetch("/cart/add", {
        method: "POST",
        body: new FormData(form)
      }).then(() => {
        window.location.href = "/checkout";
      });
    });
  });

  </script>

{% schema %}
{
  "name": "custom_product_grid",
  "settings": [

    ],
  "presets": [
    {
      "name": "custom_product_grid"
    }
  ]
}
{% endschema %}