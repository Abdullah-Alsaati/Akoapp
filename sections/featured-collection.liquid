{{ 'featured-collection.css' | asset_url | stylesheet_tag }}

<section class="featured-collection-wrapper">
  <div class="featured-collection">
    <div class="collection-image">
        <p class="collection-name">{{ section.settings.featured_collection.title }}</p>
        <img width="100%" height="auto" src="{{ section.settings.featured_collection.featured_image | img_url: 'medium' }}" alt="Collection image">
    </div>
    <div class="collection-products-wrapper">

      <div class="collection-products">
      
        {% for product in collections[section.settings.featured_collection].products %}
          <div class="product-card">
            <div class="product-image"><img width="100%" height="100%" src="{{ product.featured_image |  image_url }}" alt=""></div>
            <div class="product-information">

            </div>
            <div class="buttons"></div>
          </div>
        {% endfor %}

        </div>

    </div>
  </div>
</section>




<script>
  document.addEventListener("DOMContentLoaded", function () {
    const scrollContainer = document.querySelector(".collection-products-wrapper");
    let isDown = false;
    let startX;
    let scrollLeft;
    let velocity = 0;
    let isScrolling = false;
    let animationFrame;

    scrollContainer.addEventListener("mousedown", (e) => {
      isDown = true;
      scrollContainer.classList.add("active");
      startX = e.pageX - scrollContainer.offsetLeft;
      scrollLeft = scrollContainer.scrollLeft;
      velocity = 0;
      cancelAnimationFrame(animationFrame); // Stop inertia while dragging
    });

    scrollContainer.addEventListener("mouseleave", () => {
      if (isDown) {
        isDown = false;
        applyInertia();
      }
    });

    scrollContainer.addEventListener("mouseup", () => {
      isDown = false;
      scrollContainer.classList.remove("active");
      applyInertia();
    });

    scrollContainer.addEventListener("mousemove", (e) => {
      if (!isDown) return;
      e.preventDefault();
      isScrolling = true;

      const x = e.pageX - scrollContainer.offsetLeft;
      const delta = x - startX;
      velocity = delta * 0.2; // Adjust multiplier for smoothness
      scrollContainer.scrollLeft = scrollLeft - delta;
    });

    function applyInertia() {
      if (Math.abs(velocity) > 0.1) {
        scrollContainer.scrollLeft -= velocity;
        velocity *= 0.95; // Add friction
        animationFrame = requestAnimationFrame(applyInertia);
      } else {
        isScrolling = false;
      }
    }
  });
</script>



{% schema %}
{
  "name": "featured-collection",
  "settings": [
    {
      "type": "collection",
      "id": "featured_collection",
      "label": "أختر مجموعة منتجات لعرضها"
    }
  ],
  "presets": [
    {
      "name": "featured-collection"
    }
  ]
}
{% endschema %}
